% !TeX spellcheck = russian-aot

\section{Исследование решения}

\subsection{Исследование быстродействия системы}

\tab
Исследование быстродействия системы было проведено при помощи инструмента \en{Google Chrom Developer Tools} в веб браузере \en{Google Chrome}. В ходе тестирование было исследовано быстродействие системы как без загруженных данных так и с загруженными данными.

\tab
Для системы без данных каждый запрос к API системы был произведён 15 раз, после чего было получено среднее арифметическое значение времени ответа системы.
Во время тестирования клиентское и серверное устройство были соединены в локальную сеть при помощи кабеля \en{Ethernet}.
Полученные значение представлены в таблице 5.
\tablefive

\tab
Таким же методом была найдена средняя скорость выгрузки данных в формате .CSV с сервисного сайта системы, она составила 0.5 секунды.

\tab
После этого в систему были загружены данные о 5200 различных отчётах, сгенерированные автоматически.
Для этого было временно отключено ограничение по частоте отправки и использован скрипт для \en{Postman}.
Каждый отчёт содержал две фотографии, имеющие суммарный размер 347 kb. Среднее время загрузки одного отчёта с двумя фотографиями составило 148 мс.

\tab
До загрузки отчётов размер системы составлял 5.5 mb.
Загрузка отчётов заняла 19 минут, по прошествии этого времени система заняла 2.5 gb на диске.
Замер быстродействия был проведён описанным выше способом.
Значения скорости обработки запросов после загрузки представлена в таблице 6.
\tablesix

\tab
Средняя скорость выгрузки данных в формате .CSV с сервисного сайта системы, заполненной данными составила 17.3 секунды.

\tab
Результаты исследования показали, что с увеличением количества загруженных отчётов повышается время запроса их получения.
Несмотря на то, что из-за того, что клиентская сторона системы выполняет загрузку данных асинхронно, а также производит кеширование запросов, влияния на производительность клиентской части системы увеличение времени ожидание ответа не оказывает, оно может повлиять на других потенциальных пользователей API.

\tab
В качестве решения проблемы предложено для ответа на этот запрос на серверной стороне приложения использовать технологию пагинация, разбив многочисленные отчёты на небольшие группы и предоставив пользователю возможность запрашивать каждую группу раздельно.
Это позволит уменьшить единовременную нагрузку на сеть путём постепенной загрузки отчётов.
В ответ сервера на запрос получения отчётов были добавлены поля, указывающие сколько всего отчётов хранится в системе, а также каким образом можно загрузить предыдущую и следующую группы.
Установка размера запрашиваемой группы производится пользователем при помощи указания номера первого отчёта, который требуется получить, и их общего количества.

\tab
На клиентской части приложения запрос на загрузку всех отчётов был изменён на запрос на загрузку первых 100 отчётов с дальнейшей догрузкой последующих в случае их наличия.
Среднее время загрузки одной такой страницы с 100 отчётов составило 806 мс.

\subsection{Исследование API серверной части ПО}

\tab
Тестирование API серверной части ПО было произведено при помощи инструмента \en{Postman}\cite{postman}.
Он позволяет создавать коллекции тестов для одного и того же API, которые могут обмениваться между собой данными при помощи переменных, задавать метод авторизации и общие тесты для всех тестируемых запросов.

\tab
В ходе тестирования проверялось соответствие ответов, получаемых от сервера ожидаемым результатам. Для каждого теста проверялся как код ответа сервера, он должен находиться в диапазоне $[200; 400)$, так и сам ответ.
В тех случаях, когда ответ сервера имеет медиа тип \code{text/plain}, его корректность проверялась при помощи регулярных выражений. В тех случаях, когда ответ сервера имеет медиа тип \code{application/json}, его корректность проверялась при помощи JSON схем.
Кроме того, в случаях, когда одним из полей ответа является URL, проверялась его доступность.
В тех же случаях, когда в зависимости от введённых данных ответ на запрос может различаться (например, различные дополнительные параметры сортировки или сообщения об ошибке), после выполнения основного корректного запроса выполнялись также и запросы с дополнительными параметрами и ошибками.
Исключение составили те запросы, на количество которых было установлено ограничение по частоте отправки, такие запросы отправлялись только по одному разу.

\tab
Для тестирования запросов, требующих авторизации, данные пользователя, необходимые для входа в систему, были сохранены в переменные коллекции.
Также во время авторизации туда записывался код подтверждения адреса электронной почты и токен авторизации.

\tab
Тесты были написаны для всех типов запросов и отсортированы таким образом, что, при последовательном их выполнении, ими покрываются все действия пользователя в последовательности, приближенной к определённой сценариями использования последовательности действий реального пользователя:
\begin{enumerate}
	\item Проверка статуса системы - \code{/healthcheck}
	\item Запрос подтверждения адреса электронной почты - \code{/api/me/prove\-\_email}
	\item Запрос создания профиля пользователя - \code{/api/me/auth}
	\item Запрос подтверждения нового адреса электронной почты - \code{/api/me/prove\-\_email}
	\item Запрос изменения данных профиля пользователя - \code{/api/me/setup}
	\item Запрос получения данных текущего пользователя - \code{/api/me/profile}
	\item Запрос выхода из системы - \code{/api/me/log\-\_out}
	\item Запрос входа в систему - \code{/api/me/log\-\_in}
	\item Запрос создания отчёта - \code{/api/reports}
	\item Запрос получения данных пользователя - \code{/api/users/\{id\}}
	\item Запрос создания комментария - \code{/api/comments}
	\item Запрос получения отчётов - \code{/api/reports}
	\item Запрос удаления профиля текущего пользователя - \code{/api/me/leave}
\end{enumerate}

\tab
Тестирование, проведённое таким образом, позволило найти и исправить некоторые ошибки в работе серверной части системы, а настройка проведения этого тестирования в системе непрерывной интеграции и развёртывания дала возможность отслеживать несоответствия между ожидаемой и фактической функциональностью системы после каждого обновления её исходного кода.

\subsection{Исследование системы автоматической проверки изображений}

\tab
Система автоматической проверки изображений была протестирована с помощью специально для этой цели написанного скрипта на языке \en{Python}, а также набора данных, состоящего из 150 размеченных изображений разных классов (по 50 каждого), не использовавшихся ни при тестировании ни при валидации.

\tab
Для получения более точного времени обработки изображений на мобильных устройствах во время тестирования не использовалась графическая карта устройства.

\tab
Для обученной нейронной сети был получен следующий результат:
\begin{itemize}
	\item Средняя точность классификации: 92\%
	\item Среднее время обработки изображения: 0.4 сек
\end{itemize}

\tab
Размер файла .TFLITE, содержащего обученную нейронную сеть, составил 79.3 mb.
Исходя из этого и результатов тестирования можно сделать вывод, что система автоматической проверки изображений удовлетворяет заявленным требованиям к ней.

\tab
Настройка проведения этого тестирования в системе непрерывной интеграции и развёртывания дала возможность отслеживать точность классификации изображений системой автоматической проверки изображений в случае необходимости обучения новой модели.

\subsection{Анализ последовательностей действий пользователей клиентской части системы}

\tab
Последовательности действий пользователей системы были проанализированы при помощи web интерфейса клиентской части системы и её сервисного сайта.
В таблице 7 указано количество действий пользователя для выполнения заявленных сценариев использования.
\tableseven

\tab
В результате анализа был сделан вывод о том, что количество действий, которые необходимо произвести пользователю для выполнения сценария использования в большинстве случаев близко к количеству данных, которые он загружает в систему в этом сценарии.
В результате анализа была оптимизирована форма отправки пользователем отчёта:
\begin{itemize}
	\item Добавлено автоматическое заполнение поля \textquote{\en{Address}} при помощи данных, полученных из сервиса \la{Nominatim}.
	\item Добавлена кнопка автоматической установки маркера в текущую позицию пользователя, а также начальная позиция маркера перемещена в текущую позицию пользователя.
	\item Поле для ввода даты и времени наблюдения растения заменено на виджеты, на которых по умолчанию установлено текущее время.
\end{itemize}
Также была оптимизирована форма изменения данных профиля пользователя:
\begin{itemize}
	\item Поле изменения электронной почты, представленное в виде диалогового окна, было заменено на поле ввода с автоматически открывающимся диалоговым окном.
\end{itemize}

\tab
В результате анализа последовательности действий пользователей системы были сокращены по возможности.
Для сценария \textquote{Отправка отчёта о наблюдении потенциально опасного растения} количество обязательных действий было сокращено до 1, а для сценария \textquote{Редактирование профиля} максимальное количество действий - до 13.
